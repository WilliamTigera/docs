3 April 2023

### What's new in 3.16.1

#### Application layer policy with Envoy

{{prodname}} now includes support for Application Layer Policy with Envoy, enabling platform operators to define authorization rules in {{prodname}} policies for protocols such as HTTP and gRPC. For more information, see [Application layer policies](network-policy/application-layer-policies/).

#### Operator-managed deployments of egress gateways

{{prodname}} now includes operator-managed deployments of egress gateways. This reduces operational overhead and eliminates additional steps required during upgrades. For more information, see [Egress gateways](../networking/egress/).

### 3.16.0

#### UI for workload-based Web Application Firewall (WAF)

{{prodname}} includes a new UI to enable and configure a workload-based Web Application Firewall. For more information, see [Workload-based web application firewall](../../threat/web-application-firewall.mdx#enable-waf).

#### Service Graph performance optimizations

Several optimizations to improve the performance of Service Graph for clusters with larger numbers of namespaces have been added.

#### Improved installation steps for Rancher RKE2

{{prodname}} has improved the installation steps for Rancher RKE2 to accommodate options available in the most recent versions of that platform. For more information, see [Rancher Manager](../../getting-started/install-on-clusters/rancher-ui.mdx).

#### Improvements to Envoy to accommodate advanced ingress controllers

{{prodname}} includes improvements to its Envoy deployment to enable customers to use this feature in clusters with ingress controllers that perform advanced load balancing. For more information, see [Workload-based web application firewall](../../threat/web-application-firewall.mdx).

#### Support for multiple external networks

{{prodname}} includes networking options that allows pods from different namespaces to egress onto different external networks (Virtual Routing Functions or VRFs) that may have overlapping IPs with each other. This also enables administrators to configure which service IPs are advertised for a network by the service IP advertisement feature. [Configure egress traffic to multiple external networks](networking/egress/external-network.mdx).

#### Improved {{prodname}} component security 

{{prodname}} components were updated with more restrictive access for pods and containers using the Kubernetes security context:
- Non-root context whenever possible
- Root context and privilege escalation are used only when necessary
- Added `drop ALL capabilities` for pod security
- Enabled `RuntimeDefault` as the default seccomp profile for all workloads

### Known issues

* Upgrading to {{prodname}} 3.16.0 on Rancher/RKE from {{prodname}} 3.13.0 currently requires manually terminating the calico-node container for an upgrade to proceed.